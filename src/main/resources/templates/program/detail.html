<!doctype html>
<html lang="en" xmlns="" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
          name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="/css/layout/index.css" rel="stylesheet">
    <link href="/css/program/detail.css" rel="stylesheet">
    <link href="/css/program/datePicker.css" rel="stylesheet">
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <title>프로그램 상세</title>
</head>

<body>
<div th:replace="~{/layout/header :: header}"></div>
<main>
    <div id="content-box">
        <div class="content" id="content-box-main">
            <section class="left-section" id="program-main-container">
                <div class="content-wrap">
                    <div class="program-grid">
                        <div>
                            <div class="program-title">
                                <div data-reactroot="" style="--gp-section-max-width:1120px">
                                    <div>
                                        <div class="title-box">
                                            <div style="padding-top:24px">
                                                <section>
                                                    <div style="margin-bottom: 4px;">
                                                            <span style="font-size: 26px; line-height:30px;font-weight:  600;">
                                                                <h1 style="color: inherit;font-size: 1em;font-weight: inherit;line-height: inherit;" th:text="${program.programName}">
                                                                    역사적인 토리노를 만날 수 있는 노블룸</h1>
																<h4 class="program-price" th:text="${program.programPrice}"></h4>
                                                            </span>
                                                        </span>
                                                    </div>
                                                    <div class="title-under">
                                                        <div
                                                            style="-webkit-box-lines: multiple;display: flex;flex-wrap: wrap;margin-top: 8px;">
                                                            <span class="review-under">
                                                                <button class="review-location" type="button">
                                                                    <span aria-hidden="false"
                                                                          style="overflow-x: clip; overflow-y: clip;" th:text="|${program.programAddress}, ${program.programAddressDetail}|">투린,
                                                                        Piemonte,
                                                                        이탈리아
                                                                    </span>
                                                                </button>
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <div class="detail-container">
                                                            <div class="carousel slide" data-bs-ride="carousel" id="carouselIndicators">
                                                                <div class="carousel-indicators">
                                                                    <div th:each="image, i:${program.filePathList}">
                                                                        <button aria-current="true" class="active" data-bs-slide-to="0"
                                                                                data-bs-target="#carouselIndicators" th:if="${i.index == 0}" type="button"></button>
                                                                        <button data-bs-target="#carouselIndicators" th:attr="data-bs-slide-to=${i.index}, aria-current='true'" th:unless="${i.index == 0}"
                                                                                type="button"></button>
                                                                    </div>
                                                                </div>
                                                                <div class="carousel-inner">
                                                                    <div class="carousel-item" th:each="image:${program.filePathList}">
                                                                        <img alt="숙소 사진" style="width: 1120px; height: 630px; border-radius: 25px" th:src="|/files/display?fileName=/2023/${#strings.substring(image, 15)}|">
                                                                    </div>
                                                                </div>
                                                                <button class="carousel-control-prev" data-bs-slide="prev" data-bs-target="#carouselIndicators" type="button">
                                                                    <span aria-hidden="true" class="carousel-control-prev-icon"></span>
                                                                    <span class="visually-hidden">Previous</span>
                                                                </button>
                                                                <button class="carousel-control-next" data-bs-slide="next" data-bs-target="#carouselIndicators" type="button">
                                                                    <span aria-hidden="true" class="carousel-control-next-icon"></span>
                                                                    <span class="visually-hidden">Next</span>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </section>
                                            </div>
                                        </div>
                                        <div class="content-box">
                                            <div class="subtitle">
                                                <div>
                                                    <div>
                                                        <div style="flex-grow: 0;flex-shrink: 1;flex-basis: 100%;">
                                                            <div class="room-description">
                                                                <h2 th:text="|${program.hostName} 님이 호스팅하는 숙소|"></h2>
                                                            </div>
                                                            <ol class="room-info">
                                                                <li>
                                                                    <span class="max-head-count" th:text="${program.houseMaxHeadCount}"></span>
                                                                    <span class="axjq0r dir dir-ltr"></span>
                                                                </li>
                                                                <li>
                                                                    <span class="pen26si dir dir-ltr">
                                                                        <span aria-hidden="true"
                                                                              class="s1b4clln dir dir-ltr"> · </span>
                                                                    </span>
                                                                    <span class="max-pet-count" th:text="${program.houseMaxPetCount}"></span>
                                                                </li>
                                                            </ol>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="host-box">
                                                    <div style="height: 56px; width: 56px;">
                                                        <div style="cursor: pointer">
                                                            <div class="host-img-box"
                                                                 style="height: 56px; width: 56px; border-radius: 50%;">
                                                                <div aria-busy="false"
                                                                     role="img"
                                                                     style="--dls-liteimage-height: 100%; --dls-liteimage-width: 100%; --dls-liteimage-background-image: url(&quot;data:image/png;base64,null&quot;); --dls-liteimage-background-size: cover;">
                                                                    <img aria-hidden="true"
                                                                         th:src="${program.hostProfile}" style="width: 100%;">
                                                                    <div class="rsb5yse bmwtyu7 dqqltwe dir dir-ltr"
                                                                         style="--dls-liteimage-background-size: cover; --dls-liteimage-background-image: url(https\:\/\/a0\.muscache\.com\/im\/pictures\/user\/3de55613-4266-4ef4-869d-af9c61b00eb0\.jpg\?im_w\=240);">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="content-border">
                                                </div>
                                                <div style="padding-top: 32px; padding-bottom: 32px;">
                                                    <div style="display: flex;flex-direction: column;gap: 24px;">
                                                        <div>
                                                            <div class="content info">
                                                                <div class="icon">
                                                                    <svg aria-hidden="true" focusable="false"
                                                                         role="presentation"
                                                                         style="display: block; height: 24px; width: 24px; fill: currentcolor;"
                                                                         viewBox="0 0 32 32"
                                                                         xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M24.33 1.67a2 2 0 0 1 2 1.85v24.81h3v2H2.67v-2h3V3.67a2 2 0 0 1 1.85-2h.15zm-4 2H7.67v24.66h12.66zm4 0h-2v24.66h2zm-7 11a1.33 1.33 0 1 1 0 2.66 1.33 1.33 0 0 1 0-2.66z">
                                                                        </path>
                                                                    </svg>
                                                                </div>
                                                                <div class="text-box">
                                                                    <div class="title">
                                                                        <b>호스트 이름</b>
                                                                    </div>
                                                                    <div class="text" th:text="${program.hostName}"></div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <div class="content info">
                                                                <div class="icon">
                                                                    <svg aria-hidden="true" focusable="false"
                                                                         role="presentation"
                                                                         style="display: block; height: 24px; width: 24px; fill: currentcolor;"
                                                                         viewBox="0 0 32 32"
                                                                         xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M24.33 1.67a2 2 0 0 1 2 1.85v24.81h3v2H2.67v-2h3V3.67a2 2 0 0 1 1.85-2h.15zm-4 2H7.67v24.66h12.66zm4 0h-2v24.66h2zm-7 11a1.33 1.33 0 1 1 0 2.66 1.33 1.33 0 0 1 0-2.66z">
                                                                        </path>
                                                                    </svg>
                                                                </div>
                                                                <div class="text-box">
                                                                    <div class="title">
                                                                        <b>호스트 이메일</b>
                                                                    </div>
                                                                    <div class="text" th:text="${program.hostEmail}">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div>
                                                <div class="content-border"></div>
                                                <div style="padding-top: 32px; padding-bottom: 48px;">
                                                    <div>
                                                        <div
                                                            style="line-height: 24px; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 6; -webkit-box-orient: vertical;">
                                                            <div th:utext="${program.programContent}">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div style="padding-top: 20px; padding-bottom: 20px;">
                                                <div class="content-border"></div>
                                                <div class="room-description">
                                                    <h2>호스팅 지역</h2>
                                                </div>
                                                <div class="map-container" style="margin: 0;">
                                                    <div id="map" style="width:1120px;height:400px; margin: auto"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="right-section">
                <div class="grid">
                    <div class="grid between">
                        <div>체크인</div>
                        <div>
                            <input class="search-input " id="startDate" name="startDate"  type="text" th:value="${program.programStartDate}" readonly>
                        </div>
                    </div>
                    <div class="grid between">
                        <div>체크아웃</div>
                        <div>
                            <input class="search-input " id="endDate" name="endDate" type="text" th:value="${program.programEndDate}" readonly>
                        </div>
                    </div>
                    <div class="grid between">
                        <div>가격/박</div>
                        <div><input class="date" id="price" type="text" th:value="${program.programPrice} * ${program.between}" style="font-size: 14px;" readonly></div>
                    </div>
                </div>
                <div class="btn-box flex">
                    <form id="reserve-form" th:action="@{/program/reservation}" method="post">
                        <input type="hidden" name="programId" th:value="${program.id}">
                        <input type="hidden" name="houseId" th:value="${program.houseId}">
                        <input type="hidden" name="memberId" th:value="${member.id}">
                    </form>
                    <th:block th:if="${program.verified.name()} == 'Y'">
                        <button type="button" class="reservation-btn"><span>예약하기</span></button>
                        <button class="cancle-btn" onclick="location.href='/program/list'"><span>취소</span></button>
                    </th:block>
                    <th:block th:unless="${program.verified.name()} == 'Y'">
                        <button type="button" class="reservation-btn" disabled><span>예약완료</span></button>
                        <button class="cancle-btn" onclick="location.href='/account/program'"><span>목록으로</span></button>
                    </th:block>
                </div>
            </section>
        </div>
    </div>
</main>
<div th:replace="~{/layout/footer :: footer}"></div>
</body>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=0206a2d2eb084b7e9e5e14b2d869093d" type="text/javascript"></script>
<script crossorigin="anonymous"
        integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
        src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script crossorigin="anonymous"
        integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>
<script th:inline="javascript">
  console.log([[${program}]])
  const program = [[${program}]]
  const member = [[${member}]]
  $('.reservation-btn').on('click', ()=>{
      $('#reserve-form').submit();
  });
</script>
<script src="/js/program/detail.js"></script>
</html>